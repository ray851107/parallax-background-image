{
  "version": 3,
  "sources": ["../src/config.js", "../src/parallax-viewport.js", "../src/transform.js", "../src/parallax-element.js", "../src/main.js"],
  "sourcesContent": ["export const USE_3D = isChrome();\n\nfunction isChrome() {\n  const userAgent = navigator.userAgent;\n  return (\n    userAgent.indexOf(\"Chrome/\") !== -1 && userAgent.indexOf(\"Edge/\") === -1\n  );\n}\n", "import { USE_3D } from \"./config.js\";\n\nconst template = document.createElement(\"template\");\ntemplate.innerHTML = `\n  <style>\n    :host {\n      display: block;\n      overflow-x: hidden;\n      overflow-y: scroll;\n      -webkit-overflow-scrolling: touch;\n      ${USE_3D ? \"perspective: 1px;\" : \"\"}\n      ${USE_3D ? \"perspective-origin: 0 0;\" : \"\"}\n    }\n    :host([hidden]) {\n      display: none;\n    }\n  </style>\n  <slot></slot>\n`;\n\nexport class ParallaxViewport extends HTMLElement {\n  constructor() {\n    super();\n\n    this.attachShadow({ mode: \"open\" });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n  }\n}\n", "export function createTransform(image, element, viewport, options) {\n  const { alignX, velocity, use3d } = options;\n\n  const minWidth = element.w;\n  const minHeight = velocity * element.h + Math.abs(1 - velocity) * viewport.h;\n  let s = Math.max(minHeight / image.h, minWidth / image.w);\n\n  let x = alignX * (element.w - image.w * s);\n  let y = element.h / 2 - (image.h * s) / 2;\n  let z = 0;\n\n  const centerY = viewport.h / 2 - element.h / 2;\n  if (use3d) {\n    z = 1 - 1 / velocity;\n    x -= element.x * z;\n    y += centerY * z;\n    s /= velocity;\n  } else {\n    y += (element.y - centerY) * (velocity - 1);\n  }\n\n  return { x, y, z, s };\n}\n", "import { USE_3D } from \"./config.js\";\nimport { createTransform } from \"./transform.js\";\n\nconst template = document.createElement(\"template\");\ntemplate.innerHTML = `\n  <style>\n    :host {\n      display: block;\n      position: relative;\n      overflow: hidden;\n      background: none !important;\n      background-image: none !important;\n    }\n    :host([hidden]) {\n      display: none;\n    }\n    #image {\n      position: absolute;\n      transform-origin: 0 0 0;\n      will-change: transform;\n      pointer-events: none;\n    }\n    ::slotted(*) {\n      position: relative;\n    }\n  </style>\n  <img id=\"image\">\n  <slot></slot>\n`;\n\nexport class ParallaxElement extends HTMLElement {\n  static get observedAttributes() {\n    return [\"image-src\"];\n  }\n\n  get velocity() {\n    return parseFloat(this.getAttribute(\"velocity\") ?? \"0.8\");\n  }\n  set velocity(value) {\n    this.setAttribute(\"velocity\", value.toString());\n  }\n  get alignX() {\n    const str = this.getAttribute(\"align-x\");\n    if (str === \"left\") return 0;\n    if (str === \"center\") return 0.5;\n    if (str === \"right\") return 1;\n    const num = parseFloat(str);\n    if (isFinite(num)) return num / 100;\n    return 0.5;\n  }\n  set alignX(value) {\n    this.setAttribute(\"align-x\", `${value * 100}%`);\n  }\n  get imageSrc() {\n    return this.getAttribute(\"image-src\");\n  }\n  set imageSrc(value) {\n    this.setAttribute(\"image-src\", value);\n  }\n\n  constructor() {\n    super();\n\n    this.attachShadow({ mode: \"open\" });\n    this.shadowRoot.appendChild(template.content.cloneNode(true));\n    this.image = this.shadowRoot.getElementById(\"image\");\n    this.image.src = this.imageSrc;\n    this.transform = null;\n    this.needsRender = false;\n\n    this.image.addEventListener(\"load\", this.updateRect);\n    window.addEventListener(\"resize\", this.updateRect);\n\n    const renderLoop = () => {\n      if (this.needsRender) {\n        this.render();\n        this.needsRender = false;\n      }\n      window.requestAnimationFrame(renderLoop);\n    };\n    window.requestAnimationFrame(renderLoop);\n  }\n\n  connectedCallback() {\n    this.viewport = this.closest(\"parallax-viewport\");\n    if (!USE_3D) {\n      this.viewport?.addEventListener(\"scroll\", this.updateRect);\n    }\n  }\n\n  disconnectedCallback() {\n    if (!USE_3D) {\n      this.viewport?.removeEventListener(\"scroll\", this.updateRect);\n    }\n    this.viewport = null;\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === \"image-src\") {\n      this.image.src = this.imageSrc;\n    }\n  }\n\n  updateRect = () => {\n    if (this.viewport == null) return;\n    const imageRect = {\n      w: this.image.naturalWidth,\n      h: this.image.naturalHeight\n    };\n    const viewportRect = getRect(this.viewport);\n    const elementRect = getRect(this);\n    elementRect.x -= viewportRect.x;\n    elementRect.y -= viewportRect.y;\n    const options = {\n      velocity: this.velocity,\n      alignX: this.alignX,\n      use3d: USE_3D\n    };\n    const transform = createTransform(\n      imageRect,\n      elementRect,\n      viewportRect,\n      options\n    );\n    if (this.transform == null || !equals(this.transform, transform)) {\n      this.needsRender = true;\n      this.transform = transform;\n    }\n  };\n\n  render() {\n    const { x, y, z, s } = this.transform;\n    this.image.style.transform = `translate3d(${x}px, ${y}px, ${z}px) scale(${s})`;\n  }\n}\n\nfunction equals(a, b) {\n  return a.x === b.x && a.y === b.y && a.z === b.z && a.s === b.s;\n}\n\nfunction getRect(element) {\n  const rect = element.getBoundingClientRect();\n  return {\n    x: rect.left,\n    y: rect.top,\n    w: rect.right - rect.left,\n    h: rect.bottom - rect.top\n  };\n}\n", "import { ParallaxViewport } from \"./parallax-viewport.js\";\nimport { ParallaxElement } from \"./parallax-element.js\";\n\ncustomElements.define(\"parallax-viewport\", ParallaxViewport);\ncustomElements.define(\"parallax-element\", ParallaxElement);\n"],
  "mappings": "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",
  "names": []
}
