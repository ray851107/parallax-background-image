var parallax=function(e){"use strict";function i(e){var t=document.createElement("style");return t.appendChild(document.createTextNode(e)),t}var t="parallax-background-image-viewport",n="parallax-background-image-viewport-3d",r="parallax-background-image-element";function o(e){var a,i,t=e.use3d?s:d,n=(a=e.velocity,function(e,t,i){var n=t.w,r=i.h+a*(i.h-t.h),o=n/e.w,s=r/e.h;l(e,Math.max(o,s))}),r=(i=function(e){if("left"===e)return 0;if("center"===e)return.5;if("right"===e)return 1;var t=parseFloat(e);return isNaN(t)?.5:t/100}(i=e.alignX),function(e,t){e.x=(.5-i)*(e.w-t.w)}),o=t(e.velocity);return function(e,t,i){n(e,t,i),r(e,t,i),o(e,t,i)}}function l(e,t){e.x*=t,e.y*=t,e.z*=t,e.w*=t,e.h*=t}function s(i){return function(e,t){l(e,1/i),e.z+=1-1/i,e.x-=t.x*(1-1/i)}}function d(i){return function(e,t){e.y+=t.y*(i-1)}}function a(e,t,i){this.element=e,this.imageWidth=t.naturalWidth,this.imageHeight=t.naturalHeight,this.transform_=o(i),this.renderer=new i.renderer(e,t,i),this.bgRect={x:NaN,y:NaN,z:NaN,w:NaN,h:NaN},this.dirty=!1,this.disposed=!1,this.element.classList.add(r)}function h(e,t,i){e.position="absolute",e.left="50%",e.top="50%",e.width=t+"px",e.height=i+"px",e.transformOrigin="center center 0",e.pointerEvents="none"}function p(e,t,i,n){e.transform="translateX("+(t.x-i/2)+"px)translateY("+(t.y-n/2)+"px)translateZ("+t.z+"px)scale("+t.w/i+", "+t.h/n+")"}a.prototype.updateRect=function(e,t){if(!this.disposed){var i,n,r,o,s={x:0,y:0,z:0,w:this.imageWidth,h:this.imageHeight};this.transform_(s,e,t),r=this.bgRect,o=s,r.x===o.x&&r.y===o.y&&r.z===o.z&&r.w===o.w&&r.h===o.h||(this.dirty=!0,i=this.bgRect,n=s,i.x=n.x,i.y=n.y,i.z=n.z,i.w=n.w,i.h=n.h)}},a.prototype.render=function(){this.disposed||this.dirty&&(this.dirty=!1,this.renderer.render(this.bgRect))},a.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.element.classList.remove(r),this.renderer.dispose())};function m(e,t){var i=this;this.element=e,this.imageWidth=t.naturalWidth,this.imageHeight=t.naturalHeight,this.img=document.createElement("img"),this.style=this.img.style,this.disposed=!1,window.requestAnimationFrame(function(){i.disposed||(i.img.src=t.src,h(i.style,i.imageWidth,i.imageHeight),i.element.prepend(i.img))})}m.prototype.render=function(e){this.disposed||p(this.style,e,this.imageWidth,this.imageHeight)},m.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.element.removeChild(this.img))};function c(e,t){var i=this;this.element=e,this.imageWidth=t.naturalWidth,this.imageHeight=t.naturalHeight;var n,r,o,s,a=g++;this.className="parallax-background-image-pseudo-"+a,this.style=(n="."+this.className+"::before",o=n+" {}",s=(r=u).insertRule(o,0),r.cssRules[s].style),this.disposed=!1,window.requestAnimationFrame(function(){i.disposed||(i.style.content='""',i.style.backgroundImage="url("+t.src+")",i.style.backgroundSize="100% 100%",h(i.style,i.imageWidth,i.imageHeight),i.element.classList.add(i.className))})}var u=function(e){void 0===e&&(e="");var t=i(e);return document.head.appendChild(t),t.sheet}(),g=0;c.prototype.render=function(e){this.disposed||p(this.style,e,this.imageWidth,this.imageHeight)},c.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.element.classList.remove(this.className))};function f(e,t){var i;"string"==typeof e&&(e=document.querySelector(e)),t=Object.assign({},{use3d:-1!==(i=navigator.userAgent).indexOf("Chrome/")&&-1===i.indexOf("Edge/")},t),this.rootElement=e,this.options=t,this.parallaxElements=[],this._setupStyle(),this._monitorRects(),this._startRenderLoop()}function y(e){var t=e.getBoundingClientRect();return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2,w:t.right-t.left,h:t.bottom-t.top}}function v(e,t){e.x-=t.x,e.y-=t.y}return f.prototype._setupStyle=function(){this.rootElement.classList.add(t),this.options.use3d&&this.rootElement.classList.add(n)},f.prototype._monitorRects=function(){var e=this._updateRects.bind(this);window.addEventListener("resize",e),this.options.use3d||this.rootElement.addEventListener("scroll",e)},f.prototype._updateRects=function(){for(var e=this.parallaxElements,t=y(this.rootElement),i=0;i<e.length;++i){var n=y(e[i].element);v(n,t),e[i].updateRect(n,t)}},f.prototype._startRenderLoop=function(){var i=this.parallaxElements;window.requestAnimationFrame(function e(){for(var t=0;t<i.length;++t)i[t].render();window.requestAnimationFrame(e)})},f.prototype.add=function(e,t){if(void 0===t&&(t={}),e instanceof Element)this._addElement(e,t);else{"string"==typeof e&&(e=this.rootElement.querySelectorAll(e));for(var i=0;i<e.length;++i)this._addElement(e[i],t)}},f.prototype._addElement=function(i,n){var e,t,r,o=this;this._isViewportFor(i)&&(this._removeElement(i),null!=(n=this._parseElementOptions(i,n)).image&&(e=n.image,t=function(e,t){e||(o.parallaxElements.push(new a(i,t,n)),o._updateRects())},(r=document.createElement("img")).onload=function(e){t(null,e.target)},r.onerror=function(e){t(e.error)},r.src=e))},f.prototype._isViewportFor=function(e){return e!==this.rootElement&&e.closest("."+t)===this.rootElement},f.prototype._parseElementOptions=function(e,t){var i,n,r;return"function"==typeof t&&(t=t(e)),null==(t=Object.assign({},{velocity:.8,alignX:"center",renderer:m},t)).image&&(t.image=(i=e,n=window.getComputedStyle(i),null==(r=/^url\((['"]?)(.*)\1\)$/.exec(n.backgroundImage))?null:r[2])),t.use3d=this.options.use3d,t},f.prototype.remove=function(e){if(e instanceof Element)this._removeElement(e);else{"string"==typeof e&&(e=this.rootElement.querySelectorAll(e));for(var t=0;t<e.length;++t)this._removeElement(e[t])}},f.prototype._removeElement=function(e){for(var t=this.parallaxElements,i=0;i<t.length;++i)if(this.parallaxElements[i].element===e)return t[i].dispose(),void t.splice(i,1)},function(e){void 0===e&&(e="");var t=i(e);document.head.insertBefore(t,document.head.firstElementChild),t.sheet}("\n.parallax-background-image-element {\n  position: relative;\n  overflow: hidden !important;\n  background: none !important;\n  background-image: none !important;\n}\n\n.parallax-background-image-element > * {\n  position: relative;\n}\n\n.parallax-background-image-viewport {\n  overflow-x: hidden !important;\n  overflow-y: scroll !important;\n  -webkit-overflow-scrolling: touch;\n}\n\n.parallax-background-image-viewport-3d {\n  perspective: 1px !important;\n  perspective-origin: center center !important;\n}"),e.createViewport=function(e,t){return void 0===t&&(t={}),new f(e,t)},e.ImageElementRenderer=m,e.PseudoElementRenderer=c,e}({});